# Generated by ForkLaunch
# File: docker-compose.yaml
# This is an auto-generated file. Modifications are encouraged but may inhibit automated upgrades.

volumes: {}
networks: {}
services:
  tempo:
    image: grafana/tempo:latest
    ports:
    - '3200:3200'
    - '4317:4317'
    networks:
    - test-sdk-mode-network
    volumes:
    - './src/modules/monitoring/tempo.yaml:/etc/tempo.yaml'
    command: '-config.file=/etc/tempo.yaml'
    healthcheck:
      test:
      - CMD
      - wget
      - '--no-verbose'
      - '--tries=1'
      - '--spider'
      - http://localhost:3200/ready
      interval: '30s'
      timeout: '10s'
      retries: 3
      start_period: '60s'
  loki:
    image: grafana/loki:latest
    ports:
    - '3100:3100'
    networks:
    - test-sdk-mode-network
    healthcheck:
      test:
      - CMD
      - wget
      - '--no-verbose'
      - '--tries=1'
      - '--spider'
      - http://localhost:3100/ready
      interval: '30s'
      timeout: '10s'
      retries: 3
      start_period: '30s'
  prometheus:
    image: prom/prometheus:latest
    ports:
    - '9090:9090'
    networks:
    - test-sdk-mode-network
    volumes:
    - './src/modules/monitoring/prometheus.yaml:/etc/prometheus/prometheus.yml'
    healthcheck:
      test:
      - CMD
      - wget
      - '--no-verbose'
      - '--tries=1'
      - '--spider'
      - http://localhost:9090/-/healthy
      interval: '30s'
      timeout: '10s'
      retries: 3
      start_period: '30s'
  grafana:
    image: grafana/grafana:latest
    ports:
    - '3000:3000'
    networks:
    - test-sdk-mode-network
    volumes:
    - './src/modules/monitoring/grafana-provisioning/datasources:/etc/grafana/provisioning/datasources'
    - './src/modules/monitoring/grafana-provisioning/dashboards:/etc/grafana/provisioning/dashboards'
    healthcheck:
      test:
      - CMD
      - wget
      - '--no-verbose'
      - '--tries=1'
      - '--spider'
      - http://localhost:3000/api/health
      interval: '30s'
      timeout: '10s'
      retries: 3
      start_period: '30s'
  otel-collector:
    image: otel/opentelemetry-collector:latest
    ports:
    - '4318:4318'
    - '8889:8889'
    networks:
    - test-sdk-mode-network
    volumes:
    - './src/modules/monitoring/otel-collector-config.yaml:/etc/otel-collector-config.yaml'
    command: '--config=/etc/otel-collector-config.yaml'
